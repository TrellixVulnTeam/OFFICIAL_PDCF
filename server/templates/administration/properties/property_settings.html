{% extends 'index.html' %}

{% block body %}
<br><h1>Property Settings</h1><br>
<a class="btn btn-info" href="{{url_for('administration_property.add_property_get')}}">add property</a>
<br><br>

<div class="container-fluid">
  <div class="row">
    <div class="col">
      Sort by:
      <button id="name" class="sort btn btn-info">Name</button>
      <button id="city" class="sort btn btn-info">City</button>
      <button id="order" class="sort btn btn-info">Edit Date</button>
    </div>
    <div class="col">
      Filter by:
      <button id="rent" class="filter btn btn-info">For Rent</button>
      <button id="sale" class="filter btn btn-info">For Sale</button>
      <button id="rs" class="filter btn btn-info">For Rent & Sale</button>
      <button id="neither" class="filter btn btn-info">Not For Rent or Sale</button>
      <button id="reset" class="btn btn-info">All</button>
    </div>
    <div class="col">
      Search:  <input id="search" class="" type="text" placeholder="Search..">
    </div>

  </div>
</div>
<br>

<table class="table table-sm">
  <thead>
    <tr>
      <th scope="col">Property Info</th>
      <th scope="col">Pictures</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>
    </tr>
  </thead>
  <tbody id="body">
    {% for p in properties %}
    <tr class="prop-row">
      <td class="info">
        <div class="hidden order">{{ p.recent_order }}</div>
        <div class="container">

          <div class="name-row row">
            <div class="col-md-2">Name:</div>
            <div class="name search col-md-9">{{p.name}}</div>
          </div>

          <div class="row">
            <div class="col-md-2">Address:</div>
            <div class="search col-md-9">
              <div class="container">
              <div class="row">
                {{p.address_l1}}
              </div>
              {% if p.address_l2 %}
              <div class="row">
                {{p.address_l2}}
              </div>
              {% endif %}
              <div class="city row">
                {{p.city}}, {{p.state}} {{p.zipcode}}
              </div>
            </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">Property type: </div>
            <div class="col-md-9">{{p.type}}</div>
          </div>

          <div class="row">
            <div class="col-md-2">Beds/Baths: </div>
            <div class="col-md-9">{{p.beds}}/{{p.baths}}</div>
          </div>

          <div class="row">
            <div class="col-md-2">Area: </div>
            <div class="col-md-9">{{p.area}} sqft</div>
          </div>

          <div class="row">
            <div class="col-md-2">For sale: </div>
            {% if p.for_sale %}
            <div class="sale col-md-9">{{p.for_sale}}</div>
            {% else %}
            <div class="col-md-9">{{p.for_sale}}</div>
            {% endif %}
          </div>

          <div class="row">
            <div class="col-md-2">Sale Price: </div>
            <div class="col-md-9">${{p.sale_price}}</div>
          </div>

          <div class="row">
            <div class="col-md-2">For rent: </div>
            {% if p.for_rent %}
            <div class="rent col-md-9">{{p.for_rent}}</div>
            {% else %}
            <div class="col-md-9">{{p.for_rent}}</div>
            {% endif %}
          </div>

          <div class="row">
            <div class="col-md-2">Rent Price: </div>
            <div class="col-md-9">${{p.rent_price}}</div>
          </div>

          <div class="row">
            <div class="col-md-2">Date updated: </div>
            <div class="col-md-9">{{p.date_posted}}</div>
          </div>

          <div class="row">
            <div class="col-md-2">Notes: </div>
            <div class="col-md-9">{{p.notes}}</div>
          </div>



        </div>
      </td>
      <td>
        {% for img in p.images %}
          <a href="{{img}}">view image</a><br>
        {% endfor %}
      </td>
      <td>
        <a class="btn btn-info" href="{{ url_for('administration_property.edit_property_get',property_id=p.property_id) }}">edit</a>
      </td>
      <td>
          <form class="delete" action="{{ url_for('administration_property.delete_property') }}" method='post'>
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            <input type="hidden" name="id" value="{{p.property_id}}">
            <input class="btn btn-info" type="submit" value="delete">
          </form>
      </td>
    </tr>

    {% endfor %}
  </tbody>
</table>

<script type='text/javascript' src="{{ url_for('static',filename='js/properties.js') }}"></script>

{% endblock %}
